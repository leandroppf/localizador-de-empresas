(this["webpackJsonpdesafio-frontend-conexa"]=this["webpackJsonpdesafio-frontend-conexa"]||[]).push([[0],{69:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),r=n.n(a),o=n(43),s=n.n(o),i=n(13),l=n(2),u=n(7),j=n.n(u),p=n(30),d=n(11),b=n(15),m=n(20),O=(n(56),n(44)),h=n.n(O),x=(n(69),n(26)),f=n.n(x),g=f.a.create({baseURL:"https://cors-anywhere.herokuapp.com/https://www.receitaws.com.br/v1/"}),v=f.a.create({baseURL:"https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBD8seg0kqV2xcg-GfTobUr0i-v-kgA5Qc"}),k=n(21),w=n(48);function y(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Insira um valor para pesquisar");case 2:return n=k.a(),e.next=5,n.isValid(t);case 5:if(e.sent){e.next=8;break}throw new Error("Digite apenas n\xfameros para buscar o CNPJ");case 8:return c=k.b().shape({cnpj:k.c().min(14,"Um CNPJ precisa conter 14 d\xedgitos")}),e.next=11,c.validate({cnpj:t},{abortEarly:!1});case 11:if(w.a.isValid(t)){e.next=13;break}throw new Error("CNPJ inv\xe1lido");case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(87);var N=Object(a.createContext)({}),S=function(e){var t=e.children,n=Object(a.useState)({}),r=Object(b.a)(n,2),o=r[0],s=r[1],i=Object(a.useCallback)((function(e){s(e),console.log("selected: ".concat(e)),console.log("company: ".concat(o))}),[o]);return Object(c.jsx)(N.Provider,{value:{nome:o.nome,cnpj:o.cnpj,logradouro:o.logradouro,municipio:o.municipio,coordinate:o.coordinates,setSelectedCompany:i},children:t})},E=function(e){var t=e.company,n=(e.children,Object(a.useContext)(N).setSelectedCompany),r=Object(l.f)(),o=Object(a.useCallback)(Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:r.push("/localization");case 3:case"end":return e.stop()}}),e)}))),[t,r,n]);return Object(c.jsxs)("button",{type:"button",className:"card-main-content",onClick:function(){return o()},"data-testid":"card-button",children:[Object(c.jsx)("h3",{children:t.nome}),Object(c.jsx)("span",{children:"Raz\xe3o social"}),Object(c.jsx)("h3",{children:t.cnpj}),Object(c.jsx)("span",{children:"CNPJ"}),Object(c.jsx)("h3",{children:"".concat(t.logradouro," ").concat(t.numero," ").concat(t.bairro," ").concat(t.municipio)}),Object(c.jsx)("span",{children:"Endere\xe7o"})]})},L=n.p+"static/media/people_search.ce1d1120.svg",z=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),s=Object(b.a)(o,2),i=s[0],l=s[1],u=Object(a.useState)([]),O=Object(b.a)(u,2),x=O[0],f=O[1],k=localStorage.getItem("@LocalizadorEmpresas:empresas");Object(a.useEffect)((function(){if(k){var e=JSON.parse(k);e&&f(e)}}),[k]);var w=Object(a.useCallback)(function(){var e=Object(d.a)(j.a.mark((function e(t){var n,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x||!x.find((function(e){return e.cnpj===t.cnpj}))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.get("",{params:{address:"".concat(t.logradouro," ").concat(t.numero," ").concat(t.bairro," ").concat(t.municipio," - ").concat(t.uf," ").concat(t.cep)}});case 4:n=e.sent,(c=n.data)&&(a={cnpj:t.cnpj,nome:t.nome,cep:t.cep,bairro:t.bairro,logradouro:t.logradouro,municipio:t.municipio,numero:t.numero,uf:t.uf,coordinates:c.results[0].geometry.location},localStorage.setItem("@LocalizadorEmpresas:empresas",JSON.stringify([].concat(Object(p.a)(x),[a]))),f([].concat(Object(p.a)(x),[a])));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x]),C=Object(a.useCallback)(Object(d.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(""),e.prev=1,e.next=4,y(n);case 4:return e.next=6,g.get("cnpj/".concat(n));case 6:return t=e.sent,c=t.data,e.next=10,w(c);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),l(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])}))),[n,w]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"main-content",children:[Object(c.jsxs)("div",{className:"header-main-content",children:[Object(c.jsx)("div",{className:"title-content",children:Object(c.jsxs)("span",{children:[Object(c.jsx)(m.b,{}),"Localizador de empresas"]})}),Object(c.jsxs)("div",{className:"search-content",children:[Object(c.jsxs)("div",{className:"input-content",children:[Object(c.jsx)("input",{type:"text",className:"form-control",placeholder:"CNPJ...",value:n,onChange:function(e){r(e.currentTarget.value),l("")},maxLength:14}),i&&Object(c.jsx)("span",{children:i})]}),Object(c.jsx)("button",{type:"button",className:"btn btn-primary",onClick:C,children:"LOCALIZAR"})]})]}),Object(c.jsx)("div",{className:"list-main-content",children:x&&x.length?Object(c.jsx)(h.a,{additionalTransfrom:0,arrows:!0,autoPlaySpeed:3e3,centerMode:!1,className:"",containerClass:"container",dotListClass:"",draggable:!1,focusOnSelect:!1,infinite:!0,itemClass:"",keyBoardControl:!0,minimumTouchDrag:80,renderButtonGroupOutside:!1,renderDotsOutside:!1,responsive:{desktop:{breakpoint:{max:3e3,min:1024},items:3,partialVisibilityGutter:40},mobile:{breakpoint:{max:464,min:0},items:1,partialVisibilityGutter:30},tablet:{breakpoint:{max:1200,min:464},items:2,partialVisibilityGutter:30}},showDots:!1,sliderClass:"",slidesToSlide:1,swipeable:!0,children:x.map((function(e){return Object(c.jsx)(E,{company:e},e.cnpj)}))}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:L,alt:"peopleSearch"}),Object(c.jsx)("span",{children:"Localize acima a primeira empresa"})]})})]})})},J=(n(92),function(e){var t=e.lat,n=e.lng;return Object(a.useEffect)((function(){var e=new google.maps.LatLng(t,n),c=new google.maps.Map(document.getElementById("map"),{zoom:18,center:e});new google.maps.Marker({position:e,map:c})}),[t,n]),Object(c.jsx)("div",{id:"map"})}),P=(n(93),function(e){var t=e.nome,n=e.cnpj,a=e.logradouro,r=e.municipio;return Object(c.jsxs)("div",{className:"map-card-main-content",children:[Object(c.jsx)(i.b,{to:"/",children:Object(c.jsx)(m.a,{})}),Object(c.jsx)("h3",{children:t}),Object(c.jsx)("span",{children:"Raz\xe3o social"}),Object(c.jsx)("h3",{children:n}),Object(c.jsx)("span",{children:"CNPJ"}),Object(c.jsx)("h3",{children:"".concat(a," ").concat(r)}),Object(c.jsx)("span",{children:"Endere\xe7o"})]})}),I=function(){var e=Object(a.useContext)(N),t=e.coordinate,n=e.nome,r=e.cnpj,o=e.logradouro,s=e.municipio;return Object(c.jsxs)("div",{className:"map-location-main",children:[Object(c.jsx)(J,{lat:t.lat,lng:t.lng}),Object(c.jsx)(P,{nome:n,cnpj:r,logradouro:o,municipio:s})]})},V=function(){return Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/",exact:!0,component:z}),Object(c.jsx)(l.a,{path:"/localization",component:I})]})},B=function(){return Object(c.jsx)(S,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(V,{})})})};n(94),n(95);s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(B,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.e2f62ff9.chunk.js.map